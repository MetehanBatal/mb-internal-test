const variants = {
  signature: {
    queen: {
      stone: { variantId: 14441424781356, productTitle: 'Stone Sheet Set', price: 129, regularPrice: 159, productSavings: 20, productReviews: 439, imgUrl: 'assets/sheets/stone-sheets.png' },
      white: { variantId: 14441424814124, productTitle: 'White Sheet Set', price: 129, regularPrice: 159, productSavings: 20, productReviews: 439, imgUrl: 'assets/sheets/white-sheets.png' },
      sand: { variantId: 14441424846892, productTitle: 'Sand Sheet Set', price: 129, regularPrice: 159, productSavings: 20, productReviews: 439, imgUrl: 'assets/sheets/sand-sheets.png' },
      sky: { variantId: 14441424879660, productTitle: 'Sky Blue Sheet Set', price: 129, regularPrice: 159, productSavings: 20, productReviews: 439, imgUrl: 'assets/sheets/skye-blue-sheets.png' },
    },
    twin: {
      stone: { variantId: 14441424945196, productTitle: 'Stone Sheet Set', price: 109, regularPrice: 139, productSavings: 20, productReviews: 241, imgUrl: 'assets/sheets/stone-sheets.png' },
      // white: { variantId: 14441424977964, productTitle: 'White Sheet Set', price: 109, regularPrice: 139, productSavings: 20, productReviews: 241, imgUrl: 'assets/sheets/white-sheets.png' },
      sand: { variantId: 14441425010732, productTitle: 'Sand Sheet Set', price: 109, regularPrice: 139, productSavings: 20, productReviews: 241, imgUrl: 'assets/sheets/sand-sheets.png' },
      sky: { variantId: 14441425043500, productTitle: 'Sky Blue Sheet Set', price: 109, regularPrice: 139, productSavings: 20, productReviews: 241, imgUrl: 'assets/sheets/skye-blue-sheets.png' },
    },
    full: {
      stone: { variantId: 14441425076268, productTitle: 'Stone Sheet Set', price: 119, regularPrice: 149, productSavings: 20, productReviews: 327, imgUrl: 'assets/sheets/stone-sheets.png' },
      white: { variantId: 14441425109036, productTitle: 'White Sheet Set', price: 119, regularPrice: 149, productSavings: 20, productReviews: 327, imgUrl: 'assets/sheets/white-sheets.png' },
      sand: { variantId: 14441425141804, productTitle: 'Sand Sheet Set', price: 119, regularPrice: 149, productSavings: 20, productReviews: 327, imgUrl: 'assets/sheets/sand-sheets.png' },
      sky: { variantId: 14441425174572, productTitle: 'Sky Blue Sheet Set', price: 119, regularPrice: 149, productSavings: 20, productReviews: 327, imgUrl: 'assets/sheets/skye-blue-sheets.png' },
    },
    king: {
      stone: { variantId:  14441425207340, productTitle: 'Stone Sheet Set', price: 139, regularPrice: 159, productSavings: 20, productReviews: 234, imgUrl: 'assets/sheets/stone-sheets.png' },
      white: { variantId:  14441425240108, productTitle: 'White Sheet Set', price: 139, regularPrice: 159, productSavings: 20, productReviews: 234, imgUrl: 'assets/sheets/white-sheets.png' },
      sand: { variantId:  14441425272876, productTitle: 'Sand Sheet Set', price: 139, regularPrice: 159, productSavings: 20, productReviews: 234, imgUrl: 'assets/sheets/sand-sheets.png' },
      sky: { variantId: 14441425305644, productTitle: 'Sky Blue Sheet Set', price: 139, regularPrice: 159, productSavings: 20, productReviews: 234, imgUrl: 'assets/sheets/skye-blue-sheets.png' },
    }
  },
  luxe: {
    queen: {
      stone: { variantId: 14516028276780, productTitle: 'Stone Extra Luxe Sheet Set', price: 179, regularPrice: 209, productSavings: 20, productReviews: 565, imgUrl: 'assets/sheets/stone-sheets-luxe.png' },
      white: { variantId: 14516028309548, productTitle: 'White Extra Luxe Sheet Set', price: 179, regularPrice: 209, productSavings: 20, productReviews: 565, imgUrl: 'assets/sheets/white-sheets-luxe.png' },
      sand: { variantId: 14516028440620, productTitle: 'Sand Extra Luxe Sheet Set', price: 179, regularPrice: 209, productSavings: 20, productReviews: 565, imgUrl: 'assets/sheets/sand-sheets-luxe.png' },
      sky: { variantId: 14516028473388, productTitle: 'Sky Blue Extra Luxe Sheet Set', price: 179, regularPrice: 209, productSavings: 20, productReviews: 565, imgUrl: 'assets/sheets/skye-blue-sheets-luxe.png' },
    },
    twin: {
      stone: { variantId: 14516028506156, productTitle: 'Stone Extra Luxe Sheet Set', price: 159, regularPrice: 189, productSavings: 20, productReviews: 432, imgUrl: 'assets/sheets/stone-sheets-luxe.png' },
      // white: { variantId: 14516028538924, productTitle: 'White Extra Luxe Sheet Set', price: 159, regularPrice: 189, productSavings: 20, productReviews: 432, imgUrl: 'assets/sheets/white-sheets-luxe.png' },
      sand: { variantId: 14516028571692, productTitle: 'Sand Extra Luxe Sheet Set', price: 159, regularPrice: 189, productSavings: 20, productReviews: 432, imgUrl: 'assets/sheets/sand-sheets-luxe.png' },
      sky: { variantId: 14516028801068, productTitle: 'Sky Blue Extra Luxe Sheet Set', price: 159, regularPrice: 189, productSavings: 20, productReviews: 432, imgUrl: 'assets/sheets/skye-blue-sheets-luxe.png' },
    },
    full: {
      stone: { variantId: 14516028833836, productTitle: 'Stone Extra Luxe Sheet Set', price: 169, regularPrice: 189, productSavings: 20, productReviews: 195, imgUrl: 'assets/sheets/stone-sheets-luxe.png' },
      white: { variantId: 14516028866604, productTitle: 'White Extra Luxe Sheet Set', price: 169, regularPrice: 189, productSavings: 20, productReviews: 195, imgUrl: 'assets/sheets/white-sheets-luxe.png' },
      sand: { variantId: 4516028899372, productTitle: 'Sand Extra Luxe Sheet Set', price: 169, regularPrice: 189, productSavings: 20, productReviews: 195, imgUrl: 'assets/sheets/sand-sheets-luxe.png' },
      sky: { variantId: 14516028932140, productTitle: 'Sky Blue Extra Luxe Sheet Set', price: 169, regularPrice: 189, productSavings: 20, productReviews: 195, imgUrl: 'assets/sheets/skye-blue-sheets-luxe.png' },
    },
    king: {
      stone: { variantId: 14516029095980, productTitle: 'Stone Extra Luxe Sheet Set', price: 189, regularPrice: 219, productSavings: 20, productReviews: 327, imgUrl: 'assets/sheets/stone-sheets-luxe.png' },
      white: { variantId: 14516029358124, productTitle: 'White Extra Luxe Sheet Set', price: 189, regularPrice: 219, productSavings: 20, productReviews: 327, imgUrl: 'assets/sheets/white-sheets-luxe.png' },
      sand: { variantId: 14516029390892, productTitle: 'Sand Extra Luxe Sheet Set', price: 189, regularPrice: 219, productSavings: 20, productReviews: 327, imgUrl: 'assets/sheets/sand-sheets-luxe.png' },
      sky: { variantId: 14516029423660, productTitle: 'Sky Blue Extra Luxe Sheet Set', price: 189, regularPrice: 219, productSavings: 20, productReviews: 327, imgUrl: 'assets/sheets/skye-blue-sheets-luxe.png' },
    }
  }
};

jQuery(document).ready(function($) {
	$(".es_snippet_item").click(function(e) {
		$(this).parent().find(".es_snippet_item").removeClass("es_active");
		$(this).addClass("es_active");
	});

	$("input[name='billing_use_shipping']").change(function(e) {
		if ($(this).val() == 'false') {
			$(".checkout-billing-fields").slideDown();
		}
		else {
			$(".checkout-billing-fields").slideUp();
		}
	});

	$("input[name='combo_mode'").change(function(e) {
		$(".payment_method .payment-flds-box").hide();
		if ($(this).val() == 'credit') {
			$("#payment_field-credit").slideDown();
      $(".checkout_text").html("COMPLETE PURCHASE");
		}
		else if ($(this).val() == 'paypal') {
			$("#payment_field-paypal").slideDown();
      $(".checkout_text").html("PROCEED TO PAYPAL");
		}
		else {
			$("#payment_field-quadpay").slideDown();
      $(".checkout_text").html("PROCEED TO QUADPAY");
		}
	});

	$("#cc_number").keypress(function(e) {
      if (e.key < '0' || e.key > '9') {
        e.preventDefault();
        return;
      }
      if ($(this).val().length % 5 == 4 && $(this).val().length > 0 && $(this).val().length < 18) {
        var num = $(this).val();
        num += ' ';
        $(this).val(num);
      }
    });

    $(".checkout-combo-form .frm-flds input").focusin(function(e) {
      $(this).parent().addClass("filled");
    });

    $(".checkout-combo-form .frm-flds input").focusout(function(e) {
      if ($(this).val().trim().length <= 0) {
        $(this).parent().removeClass("filled");
      }
    });

    $(document).ready(function() {
      var counter = $('#countdown').html().split(':')[0]*60;
    
      setInterval(function() {
        counter--;
    
       if(counter >= 0) {
            var mins = Math.floor(counter / 60) % 60;
            var secs = counter % 60;
    
            $('#countdown').html(("0"+mins).slice(-2)+':'+("0"+secs).slice(-2));
       } else {
         $('#countdown').html('00:00');
    
         $('#countdown').parent().parent().fadeOut('fast');
    
         clearInterval(counter);
       }
      },1000);
    });

    function selVariant() {
    	var color = $("#es_sel-color .es_snippet_item.es_active").attr("data-value");
    	var size = $("#es_sel-size .es_snippet_item.es_active").attr("data-value");
    	var fabric = $("#es_sel-fabric .es_snippet_item.es_active").attr("data-value");
    	var variant_name = fabric + '-' + size + '-' + color;
    	$(".checkout-select-variant[data-variant-name='" + variant_name + "']").trigger("click");
    	$(".es_product-img img").attr("src", variants[fabric][size][color]['imgUrl']);
    	$(".es_price-main").text("$" + variants[fabric][size][color]['price']);
      $(".es_price-compare").text("$" + variants[fabric][size][color]['regularPrice']);
      $(".es_badge-orange").text( + variants[fabric][size][color]['productSavings'] + "% OFF");
      $(".es_product-reviews").text( + variants[fabric][size][color]['productReviews']);
      $(".es_product-title").text( variants[fabric][size][color]['productTitle']);
    }

    function filterSwatches(obj) {
      var color = $("#es_sel-color .es_snippet_item.es_active").attr("data-value");
      var size = $("#es_sel-size .es_snippet_item.es_active").attr("data-value");
      var fabric = $("#es_sel-fabric .es_snippet_item.es_active").attr("data-value");

      if (obj.parents("#es_sel-color").length > 0) {
        $("#es_sel-size .es_snippet_item").removeClass("es_hide");

        for(var i = 0; i < $("#es_sel-size .es_snippet_item").length; i ++) {
          var size1 = $("#es_sel-size .es_snippet_item").eq(i).attr("data-value");
          if (variants[fabric][size1][color] == null) {
            $("#es_sel-size .es_snippet_item").eq(i).addClass("es_hide");
          }
        }
      }
      else if (obj.parents("#es_sel-size").length > 0) {
        $("#es_sel-color .es_snippet_item").removeClass("es_hide");
        
        for(var i = 0; i < $("#es_sel-color .es_snippet_item").length; i ++) {
          var color1 = $("#es_sel-color .es_snippet_item").eq(i).attr("data-value");
          if (variants[fabric][size][color1] == null) {
            $("#es_sel-color .es_snippet_item").eq(i).addClass("es_hide");
          }
        }
      }   
    }

    $(".es_snippet_item").click(function(e) {
      filterSwatches(jQuery(this));
    	selVariant();  

    	if ($(this).attr("data-value") == 'luxe' || $(this).parents("#es_sel-gift").length > 0) {
	    	if ($("#es_sel-gift").css("display") == 'none') {
	    		$("#es_sel-gift").slideDown();
	    	}
    	}
    	else {
    		$("#es_sel-gift").slideUp();
    	}

      if ($(this).attr("data-value") == 'luxe') {
        $(".es_appear-luxe").show();
        $(".es_appear-signature").hide();
      }
      else if ($(this).attr("data-value") == 'signature') {
        $(".es_appear-luxe").hide();
        $(".es_appear-signature").show();
      }
    });

    $(".es_btn-sizechart").click(function() {
        $(".backdrop").addClass('active');
        $(".size-guide-modal.bedding").addClass('active');
    });

    $(".size-guide-modal .btn-close").click(function() {
        $(".backdrop").removeClass('active');
        $(".size-guide-modal.bedding").removeClass('active');
    });

    $(".size-guide-modal .size_chart-handle").click(function() {
      var name = $(this).attr("name");
      $(".size-guide-modal .size_chart-handle").removeClass("active");
      $(this).addClass("active");
      $(".size-guide-modal .size_table").hide();
      $(".size-guide-modal .size_table[data-handle='" + name + "']").show();
    });

    $(window).on("load", function() {
    	$("#es_sel-color .es_snippet_item.es_active").trigger("click");
    });
});

 